\hypertarget{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c}{}\section{Riferimenti per il file Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.c}
\label{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c}\index{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c@{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c}}


Esempio di utilizzo delle interruzioni B\+A\+RE metal su board S\+T\+M32.  


{\ttfamily \#include \char`\"{}stm32f4xx.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stm32f4\+\_\+discovery.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stm32f4xx\+\_\+hal\+\_\+gpio.\+h\char`\"{}}\newline
Grafo delle dipendenze di inclusione per main.\+c\+:
% FIG 0
\subsection*{Funzioni}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_a4fc01d736fe50cf5b977f755b675f11d}{setup} ()
\begin{DoxyCompactList}\small\item\em Funzione per inizializzare le periferiche da utilizzare. \end{DoxyCompactList}\item 
void \hyperlink{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_a39a24a80bc3128a314bb15c85fc22cef}{loop} ()
\begin{DoxyCompactList}\small\item\em Loop infinito richiamato dalla funzione main.\+c. \end{DoxyCompactList}\item 
void \hyperlink{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_ac40e3efd9598191869ae6e4677df48ba}{E\+X\+T\+I0\+\_\+\+I\+R\+Q\+Handler} ()
\begin{DoxyCompactList}\small\item\em Interrupt Service Routine lanciata da E\+X\+T\+I0. \end{DoxyCompactList}\item 
int \hyperlink{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_a840291bc02cba5474a4cb46a9b9566fe}{main} (void)
\end{DoxyCompactItemize}
\subsection*{Variabili}
\begin{DoxyCompactItemize}
\item 
short int \hyperlink{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_ae537d34ce0e925e9ac8ca344a74ac312}{count} =0
\end{DoxyCompactItemize}


\subsection{Descrizione dettagliata}
Esempio di utilizzo delle interruzioni B\+A\+RE metal su board S\+T\+M32. 

\begin{DoxyAuthor}{Autore}
Colella Gianni -\/ Guida Ciro -\/ Lombardi Daniele / Group IV -\/ Sistemi Embedded 2016-\/2017 
\end{DoxyAuthor}
\begin{DoxyVersion}{Versione}
V1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Data}
16-\/\+June-\/2017 
\end{DoxyDate}


\subsection{Documentazione delle funzioni}
\mbox{\Hypertarget{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_ac40e3efd9598191869ae6e4677df48ba}\label{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_ac40e3efd9598191869ae6e4677df48ba}} 
\index{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c@{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c}!E\+X\+T\+I0\+\_\+\+I\+R\+Q\+Handler@{E\+X\+T\+I0\+\_\+\+I\+R\+Q\+Handler}}
\index{E\+X\+T\+I0\+\_\+\+I\+R\+Q\+Handler@{E\+X\+T\+I0\+\_\+\+I\+R\+Q\+Handler}!Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c@{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c}}
\subsubsection{\texorpdfstring{E\+X\+T\+I0\+\_\+\+I\+R\+Q\+Handler()}{EXTI0\_IRQHandler()}}
{\footnotesize\ttfamily void E\+X\+T\+I0\+\_\+\+I\+R\+Q\+Handler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Interrupt Service Routine lanciata da E\+X\+T\+I0. 

\begin{DoxyNote}{Nota}
Una volta invocata la routine essa implementa una logica custom, in particolare una volta schicciato il bottone utente si provvede ad incrementare di 1 una variabile e mostrato il conteggio sui led. 
\end{DoxyNote}

\begin{DoxyParams}{Parametri}
{\em None.} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Valori di ritorno}
{\em None.} & \\
\hline
\end{DoxyRetVals}


Definizione alla linea 30 del file main.\+c.



Referenzia count.


\begin{DoxyCode}
30                        \{
31     \textcolor{comment}{/*L'NVIC segnala alla periferica su EXTI0 che Ã¨ stata servita */}
32     NVIC\_ClearPendingIRQ(EXTI0\_IRQn);
33     \textcolor{keywordflow}{while}(GPIOA->IDR&1);
34       \hyperlink{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_ae537d34ce0e925e9ac8ca344a74ac312}{count}++;
35       GPIOD->ODR=\hyperlink{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_ae537d34ce0e925e9ac8ca344a74ac312}{count}<<12;
36       \textcolor{keywordflow}{if}(\hyperlink{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_ae537d34ce0e925e9ac8ca344a74ac312}{count}==15)
37         \hyperlink{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_ae537d34ce0e925e9ac8ca344a74ac312}{count}=0;
38     \textcolor{comment}{/*Una volta servita l'interrupt, viene segnala la linea di EXTI da pulire}
39 \textcolor{comment}{     * in modo tale da ritornare nel main*/}
40     \_\_HAL\_GPIO\_EXTI\_CLEAR\_IT(GPIO\_PIN\_0);
41 \}
\end{DoxyCode}
\mbox{\Hypertarget{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_a39a24a80bc3128a314bb15c85fc22cef}\label{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_a39a24a80bc3128a314bb15c85fc22cef}} 
\index{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c@{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c}!loop@{loop}}
\index{loop@{loop}!Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c@{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c}}
\subsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily static void loop (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Loop infinito richiamato dalla funzione main.\+c. 

Loop per la trasmissione/ricezione di un messaggio attraverso il bus U\+A\+RT.

Loop Function.


\begin{DoxyParams}{Parametri}
{\em None} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Valori di ritorno}
{\em None} & \\
\hline
\end{DoxyRetVals}
\begin{DoxyNote}{Nota}
Toggle del Led4 ogni 0.\+4 s 
\end{DoxyNote}

\begin{DoxyRetVals}{Valori di ritorno}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definizione alla linea 63 del file main.\+c.


\begin{DoxyCode}
63            \{
64 
65 \}
\end{DoxyCode}
\mbox{\Hypertarget{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_a840291bc02cba5474a4cb46a9b9566fe}\label{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_a840291bc02cba5474a4cb46a9b9566fe}} 
\index{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c@{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c}!main@{main}}
\index{main@{main}!Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c@{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c}}
\subsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definizione alla linea 43 del file main.\+c.



Referenzia loop(), e setup().


\begin{DoxyCode}
44 \{
45     \hyperlink{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_a4fc01d736fe50cf5b977f755b675f11d}{setup}();
46     \textcolor{keywordflow}{for}(;;) \hyperlink{_elaborato2_2src_2main_8c_af1e28df83629ff23990efe2fa029811f}{loop}();
47     \textcolor{keywordflow}{return} 1;
48 \}
\end{DoxyCode}
\mbox{\Hypertarget{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_a4fc01d736fe50cf5b977f755b675f11d}\label{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_a4fc01d736fe50cf5b977f755b675f11d}} 
\index{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c@{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c}!setup@{setup}}
\index{setup@{setup}!Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c@{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c}}
\subsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily void setup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Funzione per inizializzare le periferiche da utilizzare. 


\begin{DoxyParams}{Parametri}
{\em None.} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Valori di ritorno}
{\em None.} & \\
\hline
\end{DoxyRetVals}


Definizione alla linea 54 del file main.\+c.



Referenziato da main().


\begin{DoxyCode}
54             \{
55     HAL\_Init();
56     BSP\_LED\_Init(LED3);
57     BSP\_LED\_Init(LED4);
58     BSP\_LED\_Init(LED5);
59     BSP\_LED\_Init(LED6);
60     BSP\_PB\_Init(BUTTON\_KEY, BUTTON\_MODE\_EXTI);
61 \}
\end{DoxyCode}


\subsection{Documentazione delle variabili}
\mbox{\Hypertarget{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_ae537d34ce0e925e9ac8ca344a74ac312}\label{_elaborato3_2_elaborato3__1___interrupt_b_a_r_e_2main_8c_ae537d34ce0e925e9ac8ca344a74ac312}} 
\index{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c@{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c}!count@{count}}
\index{count@{count}!Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c@{Elaborato3/\+Elaborato3\+\_\+1\+\_\+\+Interrupt\+B\+A\+R\+E/main.\+c}}
\subsubsection{\texorpdfstring{count}{count}}
{\footnotesize\ttfamily short int count =0}



Definizione alla linea 17 del file main.\+c.



Referenziato da E\+X\+T\+I0\+\_\+\+I\+R\+Q\+Handler(), E\+X\+T\+I1\+\_\+\+I\+R\+Q\+Handler(), e H\+A\+L\+\_\+\+G\+P\+I\+O\+\_\+\+E\+X\+T\+I\+\_\+\+Callback().

